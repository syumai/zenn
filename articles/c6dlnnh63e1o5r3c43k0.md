---
title: "Go 1.18 で使えるようになるジェネリクス関連の文法まとめ"
emoji: "️🌄"
type: "tech"
topics: ["Go"]
published: false
---

Go 1.18 では、いわゆるジェネリクスを実現するための機能が追加される見込みです。

これに伴って行われる言語仕様や、標準ライブラリなどに対する変更を簡単にまとめました。

基本的には文法に絞った内容とし、型推論などの詳細には触れません。

---


---

# インタフェースの仕様の拡張

従来のインタフェースは、 *メソッド集合* (method sets) を表現するものでした。インタフェースを実装するとは、

ジェネリクスの導入に伴って、インタフェースは型パラメータの型制約に利用されることになり、メソッド集合だけでは表現力が不足するようになりました。
この問題を解決するために、新たにインタフェースは *型要素* (type elements) を持つことが出来るようになりました。
これによって、インタフェースは、メソッド集合を表現するものから、*型集合* (type sets) を表現するものとなり、より広い概念となりました。

---

# 型パラメータリスト

型パラメータリストは、それを持つ型、または関数が、どういった型引数を受け付けることが出来るかを示す宣言です。
型パラメータリスト内で宣言された **型パラメータ** は、型定義、または関数宣言内で、あたかもその名前の型が存在するかのように扱うことが出来ます。
型定義、または関数宣言内でどのように型パラメータを使うことが出来るかは後述します。

型エイリアス宣言、メソッド宣言に対しては型パラメータリストを追加することが出来ません。(後述しますが、型エイリアス宣言に対しては、Go 1.19 以降のどこかで追加される見込みです)

型定義に対する型パラメータリスト追加の例

```go
type A[T any] struct {
}
```


---

# 型パラメータの制約

---

# インタフェース

---

# any, comparable

事前宣言された識別子として、新たに any と comparable が追加されます。
いずれも、型パラメータの制約として使うために追加された、 **インタフェース型の値** を示します。

## any

any は、 `interface{}` に対するエイリアスです。

`interface{}` は、全ての型を型セットに含むインタフェースなので、 `any` も同様に任意の型を受け付ける制約として使うことが出来ます。

```go
func PrintAny[T any](v T) {

}
```

```go
```

```go
var v any
v = 1        // OK
v = "string" // OK
```

---

# 型宣言

---

# 関数宣言

---

# メソッド宣言

---

# 型パラメータに対する操作

---

# 型引数

---

# まだ出来ないこと

## 型エイリアス

## 

---

# メソッド

---

# 参考文献



